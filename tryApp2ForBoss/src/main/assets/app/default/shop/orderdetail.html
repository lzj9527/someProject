<!doctype html>
<html>

<head>
    <title>订单详情</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 user-scalable=no">
    <meta name="format-detection" content="telephone=no" />
    <!-- bootstrap start -->
    <link rel="stylesheet" href="../static/css/bootstrap.min.css">
    <link rel="stylesheet" href="../static/css/bootstrap-theme.min.css">
    <script src="../static/js/jquery-3.0.0.js"></script>
    <script src="../static/js/bootstrap.min.js"></script>
    <!-- bootstrap end -->
    <script type="text/javascript" src="../static/js/config.js"></script>
    <script type="text/javascript" src="../static/js/function.js"></script>
    <script type="text/javascript" src="../static/js/androidJSInterface.js"></script>
    <script src="../static/js/touch.js"></script>
    <link rel="stylesheet" type="text/css" href="../static/css/ui-box.css">
    <link rel="stylesheet" type="text/css" href="../static/css/ui-base.css">
    <link rel="stylesheet" type="text/css" href="../static/css/ui-color.css">
    <link rel="stylesheet" type="text/css" href="../static/css/ui-control.css">
    <link rel="stylesheet" type="text/css" href="../static/css/ui-icon.css">
    <link rel="stylesheet" type="text/css" href="../static/css/ui-my.css">
    <link rel="stylesheet" type="text/css" href="../static/css/swiper.min.css">
    <script src="../static/js/swiper.min.js"></script>
</head>

<body class="um-vp" ontouchstart>
    <div id="page_1" class="up ub ub-ver" tabindex="0">

    <div class="ub ub-f1 ub-ver" style="overflow:auto">

        <div class="ub bc-bg-b1 ub-ac ub-pc bc-text-d2 orderstatus" style="height:4em"><img src="../static/images/diamond2.png" style="height:3em"> </div>
<div class="ub ub-ver  shopaddress ">
 <!--


        <div class="ub ub-fh " style="background:url(../static/images/line-95.png) left top repeat-x; height:0.2em; margin:0.5em 0em"></div>


        <div class="ub shopaddress">

            <div class="ub ub-pc ub-ac" style="width:4em"><img src="../static/images/address-96.png" style="width:2em"></div>

            <div class="ub ub-f1 ub-ver umar-l">

                <div class="ub"><span class="bc-text-c2">联系人:</span>XXXXXXXXXXXXXX(门店)</div>
                <div class="ub"><span class="bc-text-c2">详细地址:</span>XXXXXXXXXXXXXXXXXX</div>

            </div>

        </div>


        <div class="ub ub-fh " style="background:url(../static/images/line-95.png) left top repeat-x; height:0.5em; margin:0.5em 0em 0em 0em"></div>


-->


</div>
        <div class="ub  ub-ver bossaddress" style="margin:0em 1.5em;">
            <!--
            <div class="ub uinn ub-ver" style="border-bottom:1px #f0efef dashed;">
                <div class="ub uinn-lr"><span class="bc-text-c2">联系人:</span>罗小姐</div>
                <div class="ub uinn-lr"><span class="bc-text-c2">联系电话:</span>13111111111</div>
            </div>
            <div class="ub uinn ">备注信息备注信息备注信息备注信息备注信息备注信息备注信息备注信息备注信息备注信息备注信息</div>
            -->
        </div>
        <div class="ub ub-fh ub-img2 ubt bc-border-b1" style="background-image:url(../static/images/line-57.png); height:0.5em; margin:0.5em 0em"></div>


        <!--
        <div class="ub  umar-a ub-ver">
            <div class="ub">
                <div class="ub ub-f1 bc-bg-b1 uinn ub-pc">门店A</div>
                <div class="ub ub-f3 bc-bg-c4 uinn">订单号:2555222255522</div>
            </div>
            <div class="ub uinn ubb bc-border-c4">
                <div class="ub ub-img uba bc-border-c4" style="width:4em;height:4em; background-image: url(../static/images/eg.png); "></div>
                <div class="ub ub-f1 ub-ver">
                    <div class="ub umar-l ">
                        <div class="ub ub-f1">18K白金钻石女戒</div>
                        <div class="ub  bc-text-c2"><i class="ub ub-img" style="width:1.2em; height:1.2em;background-image:url(../static/images/pprice.png)"></i>￥67999.00</div>
                    </div>
                    <div class="ub umar-l  umar-b  " style="padding-bottom:.5em; border-bottom:1px #a9a9a9 dashed">
                        <div class="ub ub-f1">
                            <div class="ub bc-text-c2">
                                <span class="bc-text-c1">手寸:</span>12
                                <span class="bc-text-c1">数量:</span>X1
                            </div>
                        </div>
                        <div class="ub"><i class="ub ub-img" style="width:1.2em; height:1.2em; background-image:url(../static/images/iconprice.png)"></i>￥67999.00</div>
                    </div>
                    <div class="umar-l  bc-text-c2">
                        <div class="ub ufl size10">HDC554587</div>
                        <div class="ub ufl size10" style="margin:0 0.4em">|</div>
                        <div class="ub ufl size10">0.961g</div>
                        <div class="ub ufl size10 ufl" style="margin:0 0.4em">|</div>
                        <div class="ub ufl size10">18K白</div>
                        <div class="ub ufl size10" style="margin:0 0.4em">|</div>
                        <div class="ub ufl size10"><span class="bc-text-c2">副</span>0.8/8</div>
                        <div class="ub ufl size10" style="margin:0 0.4em">|</div>
                        <div class="ub ufl size10"><span class="bc-text-c2">副</span>白色</div>
                        <div class="ub ufl size10" style="margin:0 0.4em">|</div>
                        <div class="ub ufl size10 ufl ufl"><span class="bc-text-c2">主</span>0.31ct/1</div>
                        <div class="ub ufl size10 ufl" style="margin:0 0.4em">|</div>
                        <div class="ub ufl size10">VS1</div>
                        <div class="ub ufl size10" style="margin:0 0.4em">|</div>
                        <div class="ub ufl size10">GIA5213496771</div>
                        <div class="ub ufl size10" style="margin:0 0.4em">|</div>
                    </div>
                </div>
            </div>
            <div class="ub  ">
                <div class="ub ub-f1 ub-pe uinn ">共1件商品</div>
                <div class="ub ub-f1 ub-pe uinn "><i class="ub ub-img" style="width:1.3em; height:1.3em;background-image:url(../static/images/pprice.png)"></i>￥67999.00</div>
                <div class="ub ub-f1 ub-pe uinn bc-text-c2"><i class="ub ub-img" style="width:1.3em; height:1.3em; background-image:url(../static/images/iconprice.png)"></i>￥67999.00</div>
            </div>
        </div>
-->

<div class="ub ub-ver orderlist ub-f1">



</div>


</div>

<!-- <div class="ub ">
          <div class="ub ub-f2 uinn  bc-bg-c4  "">

          </div>
          <div class="ub ub-f1 uinn bc-bg-a3 ub-ac ub-pc bc-text-c5 ">
             <div class="ub ub-f1  ub-ac ub-pc umar-t umar-b">
              取消订单
              </div>

          </div>
      </div>
 -->







    </div>

<div class="modal fade" id="mymodal" style="top:-40%">
                    <div class="ub ub-con ub-pc ub-ac">
                        <div class="ub uc-a1 bc-bg ub-ver" style="width:90%; height:auto">
                            <div class="ub ub-pe uinn umar">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="color:#ec3a49;width: 0.8em; height: 0.8em"><span aria-hidden="true">&times;</span></button>
                            </div>
                            <div style=" margin:  1em 1em">
                                <div class="container-fluid ">
                                    <div class="col-sm-2 none-padding umh4 " style="line-height: 34px;"> 联系人: </div>
                                    <div class="col-sm-2 none-padding ">

                                        <input type="hidden" name="orderid" id="orderid"  value="0">
                                        <input type="hidden" name="addressid" id="addressid"  value="0">

                                        <input type="ordername" class="form-control" id="ordername"> </div>
                                    <div class="col-sm-2 none-padding umh4" style="line-height: 34px;">联系电话: </div>
                                    <div class="col-sm-5 none-padding ">
                                        <input type="orderphone" class="form-control" id="orderphone"> </div>
                                </div>
                                <div class="container-fluid " style="margin-top: 1em">
                                    <div class="col-sm-2 none-padding umh4" style="line-height: 34px;">地址: </div>
                                    <div class="col-sm-10 none-padding ">
                                        <input type="orderaddress" class="form-control" id="orderaddress"> </div>
                                </div>
                            </div>
                            <div style=" margin:  1em 2em">
                                <div class="ub  sc-btn  ub-ac ub-pc ulev1 uinn bc-text-head" data-dismiss="modal" onclick="saveOrder()"> 修 改 </div>
                            </div>
                        </div>
                    </div>
</div>






</body>
<script>
var storage = window.localStorage;
var key = storage["use_key"];

//点击图片
function product_onclick(id){
//console.log(id);
    $.ajax({
            url: appUrl + '/app/index.php?i=2&c=entry&m=ewei_shop&v=pad&do=goods&p=goods&id='+id+'&key=' + key,
            type: "get",
            dataType: 'jsonp',
            success: function(data) {
                if (data.resultCode == "0") {
                      var tag=data.datas.tag;
                       if (tag == 'two') {
                         openDetailWindowInCoupleRing(id, '');
                        } else {
                        openDetailWindow(id, '');
                        }
                } else {
                    showToast(data.error);
                }
            },
            error: function() {
                //showToast("error!");
            }
        })

}



 function ini_data(){


    var orderid = getUrlParam("orderid");

    console.log(appUrl + '/app/index.php?i=2&c=entry&m=ewei_shop&v=pad&do=member&p=member_order&key='+key+'&act=detail&id='+orderid);
    $.ajax({

        url : appUrl + '/app/index.php?i=2&c=entry&m=ewei_shop&v=pad&do=member&p=member_order&key='+key+'&act=detail&id='+orderid,
        type: "get",
        dataType : 'jsonp',
        success : function(data) {

             show_list(data);

        },
        error : function() {
            //showToast("error!");
        }
    })


}



function btEdit(id,strname,strmobile,straddress,orderid){
    $("#ordername").val(strname);
    $("#orderphone").val(strmobile);
    $("#orderaddress").val(straddress);
    $("#orderid").val(orderid);
    $("#addressid").val(id);
    $('#mymodal').modal();
}



function saveOrder(){

    var address = $("#ordername").val();
    var mobile = $("#orderphone").val();
    var bztext = $("#orderaddress").val();
    var orderid = $("#orderid").val();
    var addressid = $("#addressid").val();
    //console.log(addressid);

if (addressid>0){
       //console.log('1');

    console.log(appUrl + '/app/index.php?i=2&c=entry&m=ewei_shop&v=pad&do=member&p=member_address&act=edit&id='+addressid+'&realname=' + address + '&mobile=' + mobile + '&address=' + bztext + '&key=' + key)

    $.ajax({
        url: appUrl + '/app/index.php?i=2&c=entry&m=ewei_shop&v=pad&do=member&p=member_order&act=edit&id='+orderid+'&realname=' + address + '&mobile=' + mobile + '&address=' + bztext + '&key=' + key,
        type: "get",
        dataType: 'jsonp',
        success: function(data) {

            if (data.resultCode == "0") {


            ini_data();



            } else {
                showToast(data.error);
            }
        },
        error: function() {
            //showToast("error!");
        }
    })

}else{

  //console.log('2');
    console.log(appUrl + '/app/index.php?i=2&c=entry&do=orderupdate&m=test&id='+orderid+'&address_send=' + address + '&mobile=' + mobile + '&remark=' + bztext + '&key=' + key)

    $.ajax({
        url: appUrl + '/app/index.php?i=2&c=entry&do=orderupdate&m=test&id='+orderid+'&address_send=' + address + '&mobile=' + mobile + '&remark=' + bztext + '&key=' + key,
        type: "get",
        dataType: 'jsonp',
        success: function(data) {

            if (data.resultCode == "0") {

               ini_data();




            } else {
                showToast(data.error);
            }
        },
        error: function() {
            //showToast("error!");
        }
    })









}




}
















function show_list(data) {
    //console.log(JSON.stringify(data));
    var strHtml = '<div class="ub ub-ver">';
    ////console.log(data.datas.list.length);
    var orderstatus='';
    var goodnum=0;
    var totalprice=0;






    //for (var i = 0; i < data.datas.list.length; i++) {
        goodnum=0;
        totalprice=0;
        changeprice = 0;
        strHtml += '<!--开始--><div class="ub  umar-a ">';

        //strHtml += '<div class="ub ub-f1 bc-bg-b1 uinn ub-pc">'+data.datas.nickname+'</div>';
        strHtml += '<div class="ub ub-f1 bc-bg-c4 uinn size12">订单号:'+data.datas.ordersn+'</div>';


        if (data.datas.status=='1'){
            orderstatus='待发货';
        }else if(data.datas.status=='2'){
            orderstatus='待收货';
        }else if(data.datas.status=='3'){
            orderstatus='已完成';
        }else if(data.datas.status=='4'){
            orderstatus='待审核';
        }else if(data.datas.status=='5'){
            orderstatus='已审核';
        }else if(data.datas.status=='-1'){
            orderstatus='取消';
        }else{
            orderstatus='';
        }


       strHtml += '<div class="ub  bc-bg-a1 uinn ub-pc bc-text-c5 size12">'+data.datas.createtime.substring(0,16)+'</div>';


        strHtml += '</div>';





        //加载商量开始
        var strHtml1, strHtml2, strHtml3, strHtml4, strHtml5, strHtml6, strHtml7, strHtml8, strHtml9, strHtml10, strHtml11, strHtml12;

        ////console.log(data.datas.id);

        for (var j = 0; j < data.datas.order_goods.length; j++) {
             goodnum=goodnum+1;



             strHtml += '<div class="ub uinn ubb bc-border-c4" >';


             //strHtml +='<div class="ub ub-pc ub-ac " style="width:1.5em; ">';
             //strHtml +='<input type="checkbox" name=""  class="selects" data-listid="'+data.datas.list.id+'" data-goodsid="'+data.datas.order_goods[j].id+'">';
            // strHtml +='</div>   ';


            ////console.log(data.datas.order_goods[j].gia);
            //GIA
            if (isDefine(data.datas.order_goods[j].gia) && data.datas.order_goods[j].gia != '' &&data.datas.order_goods[j].goodsid=='0' ) {

                for (var key in data.datas.order_goods[j].gia) {
                      console.log('1');
                    //alert('1');

                     if (key == 'sn') {
                         strHtml1 = '<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">货号:' + '</span>' + data.datas.order_goods[j].gia[key] + '</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';
                    }

                    if (key == 'style') {
                        strHtml2 = '<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">形状:' + '</span>' + data.datas.order_goods[j].gia[key] + '</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';
                    }

                    if (key == 'weight') {
                        strHtml3 = '<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">重量:' + '</span>' + data.datas.order_goods[j].gia[key] + '</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';
                    }

                    if (key == 'color') {
                        strHtml4 = '<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">颜色:' + '</span>' + data.datas.order_goods[j].gia[key] + '</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';
                    }

                    if (key == 'clarity') {
                        strHtml5 = '<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">净度:' + '</span>' + data.datas.order_goods[j].gia[key] + '</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';
                    }

                    if (key == 'cut') {
                        strHtml6 = '<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">切工:' + '</span>' + data.datas.order_goods[j].gia[key] + '</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';
                    }

                    if (key == 'polish') {
                        strHtml7 = '<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">抛光:' + '</span>' + data.datas.order_goods[j].gia[key] + '</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';
                    }

                    if (key == 'symmetry') {
                        strHtml8 = '<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">对称:' + '</span>' + data.datas.order_goods[j].gia[key] + '</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';
                    }

                    if (key == 'fluorescence') {
                        strHtml9 = '<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">荧光:' + '</span>' + data.datas.order_goods[j].gia[key] + '</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';
                    }

                    if (key == 'certtype') {
                        strHtml10 = '<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">证书:' + '</span>' + data.datas.order_goods[j].gia[key] + '</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';
                    }

                    if (key == 'certno') {
                        strHtml11 = '<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">证书号:' + '</span>' + data.datas.order_goods[j].gia[key] + '</div>';
                    }

                    if (key == 'price') {
                        var strHtml12 = data.datas.order_goods[j].gia[key];
                    }

                }

                totalprice=totalprice+parseFloat(data.datas.order_goods[j].price);
                changeprice = changeprice + parseFloat(data.datas.order_goods[j].changeprice);




                strHtml += '<div class="ub uinn  ub-f1   bc-border-c4">';

                strHtml += '<div class="ub ub-img uba bc-border-c4" style="width:48px;height:48px; background-image: url(../static/images/diamond.png);"></div>';
                strHtml += '<div class="ub ub-f1 ub-ver">';

                strHtml += '<div class="ub umar-l ">';
                strHtml += '<div class="ub ub-f1 size12">裸钻</div>';

                if (data.datas.addressid>0){
                strHtml += '<div class="ub  bc-text-c2"><i class="ub ub-img" style="width:1.3em; height:1.3em;background-image:url(../static/images/pprice.png)"></i>￥<span class="pricelist">' + data.datas.order_goods[j].price + '</span></div>';
                }else{
                  strHtml += '<div class="ub  bc-text-c2"><i class="ub ub-img" style="width:1.3em; height:1.3em;background-image:url(../static/images/iconprice.png)"></i>￥<span class="pricelist">' + data.datas.order_goods[j].price + '</span></div>';
                }

                strHtml += '</div>';

                strHtml += '<div class="ub umar-l " style="padding-bottom:.5em; border-bottom:1px #a9a9a9 dashed">';
                strHtml += '<div class="ub ub-f1 size12"></div>';

                if (data.datas.addressid<1){
                strHtml += '<div class="ub  bc-text-c2"><i class="ub ub-img" style="width:1.3em; height:1.3em; background-image:url(../static/images/pprice.png)"></i>￥<span class="pricelist">' + data.datas.order_goods[j].changeprice + '</span></div>';
                }


                strHtml += '</div>';
                strHtml += '<div class="umar-l umar-t  bc-text-c2">                                        ';

                strHtml = strHtml + strHtml2 + strHtml3 + strHtml4 + strHtml5 + strHtml6 + strHtml7 + strHtml8 + strHtml9 + strHtml10 + strHtml11;

                strHtml += '</div>';
                strHtml += '</div>';
                strHtml += '</div>';













            } else {

               // if (isDefine(data.datas.order_goods[j].goods)){

                strHtml += '<div class="ub uinn  bc-border-c4 ub-f1">';

                if (isDefine(data.datas.order_goods[j].goods)){
                strHtml += '<div class="ub ub-img uba bc-border-c4" onclick="product_onclick('+data.datas.order_goods[j].goods.id+')"  style="width:48px;height:48px; background-image: url(' + data.datas.order_goods[j].goods.thumb.url+ '); "></div>';
                }else{

                strHtml += '<div class="ub ub-img uba bc-border-c4" style="width:72px;height:72px; background-image: url(); "></div>';
                }

                strHtml += '<div class="ub ub-f1 ub-ver">';
                strHtml += '<div class="ub umar-l ">';
                if (isDefine(data.datas.order_goods[j].goods)){
                strHtml += '<div class="ub ub-f1 size12">' + data.datas.order_goods[j].goods.title + '</div>';
                }else{
                   //strHtml += '<div class="ub ub-f1">'+data.datas.order_goods[j].title+'</div>';
                }

            if (data.datas.addressid>0){

                strHtml += '<div class="ub  bc-text-c2"><i class="ub ub-img" style="width:1.3em; height:1.3em; background-image:url(../static/images/pprice.png)"></i>￥<span class="pricelist">' + data.datas.order_goods[j].price + '</span></div>';
            }else{
                 strHtml += '<div class="ub  bc-text-c2"><i class="ub ub-img" style="width:1.3em; height:1.3em; background-image:url(../static/images/iconprice.png)"></i>￥<span class="pricelist">' + data.datas.order_goods[j].price + '</span></div>';

            }


                strHtml += '</div>';
                strHtml += '<div class="ub umar-l  umar-b  " style="padding-bottom:.5em; border-bottom:1px #a9a9a9 dashed">';
                strHtml += '<div class="ub ub-f1">';
                strHtml += '<div class="ub bc-text-c2">';
                strHtml += '<span class="bc-text-c1 size10">手寸:</span><span class="size10">' + data.datas.order_goods[j].size + '</span>';
                strHtml += '<span class="bc-text-c1 size10">数量:</span><span class="size10">X' + data.datas.order_goods[j].total + '</span>';
                strHtml += '</div>';
                strHtml += '</div>';

                if (data.datas.addressid<1 &&data.datas.order_goods[j].changeprice>0){
                strHtml += '<div class="ub"><i class="ub ub-img" style="width:1.3em; height:1.3em;  background-image:url(../static/images/pprice.png)"></i>￥<span class="pricelist">' + data.datas.order_goods[j].changeprice + '</span></div>';
                }

                strHtml += '</div>';
                strHtml += '<div class="umar-l  bc-text-c2">';
                //strHtml +='<div class="ub ufl size10">HDC554587</div>';
                //strHtml +='<div class="ub ufl size10" style="margin:0 0.4em">|</div>';
                var erpHtml = '';

                if (isDefine(data.datas.order_goods[j].erpdata)){
                        console.log('2');
                      if (isDefine(data.datas.order_goods[j].erpdata.erpid)&data.datas.order_goods[j].erpdata.erpid!=''  ){
                         erpHtml += '<div class="ubi ufl size10 bc-text-c2" style="margin:0 0.1em">货号:</div> <div class="ubi ufl size10 bc-text-c2">' + data.datas.order_goods[j].erpdata.erpid + '</div><div class="ubi ufl size10 bc-text-c2" style="margin:0 0.4em"> | </div>';
                      }

                      if (isDefine(data.datas.order_goods[j].erpdata.p1)&data.datas.order_goods[j].erpdata.p1!=''){
                         erpHtml += '<div class="ubi ufl size10 bc-text-c2" style="margin:0 0.1em">金重:</div> <div class="ubi ufl size10 bc-text-c2">' + data.datas.order_goods[j].erpdata.p1 + '</div><div class="ubi ufl size10 bc-text-c2" style="margin:0 0.4em"> | </div>';
                      }

                      if (isDefine(data.datas.order_goods[j].erpdata.p4)&data.datas.order_goods[j].erpdata.p4!=''){
                         erpHtml += '<div class="ubi ufl size10 bc-text-c2" style="margin:0 0.1em">材质:</div> <div class="ubi ufl size10 bc-text-c2">' + data.datas.order_goods[j].erpdata.p4 + '</div><div class="ubi ufl size10 bc-text-c2" style="margin:0 0.4em"> | </div>';
                      }

                      if (isDefine(data.datas.order_goods[j].erpdata.p7)&data.datas.order_goods[j].erpdata.p7!=''){
                         erpHtml += '<div class="ubi ufl size10 bc-text-c2" style="margin:0 0.1em">副石:</div> <div class="ubi ufl size10 bc-text-c2">' + data.datas.order_goods[j].erpdata.p7 + '</div><div class="ubi ufl size10 bc-text-c2" style="margin:0 0.4em"> | </div>';
                      }

                      if (isDefine(data.datas.order_goods[j].erpdata.p6)&data.datas.order_goods[j].erpdata.p6!=''){
                         erpHtml += '<div class="ubi ufl size10 bc-text-c2" style="margin:0 0.1em">主石</div> <div class="ubi ufl size10 bc-text-c2">' + data.datas.order_goods[j].erpdata.p6 + '</div><div class="ubi ufl size10 bc-text-c2" style="margin:0 0.4em"> | </div>';
                      }

                       if (isDefine(data.datas.order_goods[j].erpdata.p8)&data.datas.order_goods[j].erpdata.p8!=''){
                         erpHtml += '<div class="ubi ufl size10 bc-text-c2" style="margin:0 0.1em">形状:</div> <div class="ubi ufl size10 bc-text-c2">' + data.datas.order_goods[j].erpdata.p8 + '</div><div class="ubi ufl size10 bc-text-c2" style="margin:0 0.4em"> | </div>';
                      }

                      if (isDefine(data.datas.order_goods[j].erpdata.p2)&data.datas.order_goods[j].erpdata.p2!=''){
                         erpHtml += '<div class="ubi ufl size10 bc-text-c2" style="margin:0 0.1em">净度:</div> <div class="ubi ufl size10 bc-text-c2">' + data.datas.order_goods[j].erpdata.p2 + '</div><div class="ubi ufl size10 bc-text-c2" style="margin:0 0.4em"> | </div>';
                      }

                      if (isDefine(data.datas.order_goods[j].erpdata.p3)&data.datas.order_goods[j].erpdata.p3!=''){
                         erpHtml += '<div class="ubi ufl size10 bc-text-c2" style="margin:0 0.1em">颜色:</div> <div class="ubi ufl size10 bc-text-c2">' + data.datas.order_goods[j].erpdata.p3.replace('<','&lt;') + '</div><div class="ubi ufl size10 bc-text-c2" style="margin:0 0.4em"> | </div>';
                      }



                    }else{

console.log('4');

                    if (isDefine(data.datas.order_goods[j].gia)){
                      console.log('3');
                    for (var key2 in data.datas.order_goods[j].gia) {

                    //alert('1');
                                //console.log(data.datas.order_goods[j].gia[key2]);

                                if (key2 == 'sn') {
                                     strHtml1 = '<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">货号:' + '</span>' + data.datas.order_goods[j].gia[key2] + '</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';
                                }

                                if (key2 == 'style') {
                                    strHtml2 = '<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">形状:' + '</span>' + data.datas.order_goods[j].gia[key2] + '</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';
                                }

                                if (key2 == 'weight') {
                                    strHtml3 = '<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">重量:' + '</span>' + data.datas.order_goods[j].gia[key2] + '</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';
                                }

                                if (key2 == 'color') {
                                    strHtml4 = '<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">颜色:' + '</span>' + data.datas.order_goods[j].gia[key2] + '</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';
                                }

                                if (key2 == 'clarity') {
                                    strHtml5 = '<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">净度:' + '</span>' + data.datas.order_goods[j].gia[key2] + '</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';
                                }

                                if (key2 == 'cut') {
                                    strHtml6 = '<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">切工:' + '</span>' + data.datas.order_goods[j].gia[key2] + '</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';
                                }

                                if (key2 == 'polish') {
                                    strHtml7 = '<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">抛光:' + '</span>' + data.datas.order_goods[j].gia[key2] + '</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';
                                }

                                if (key2 == 'symmetry') {
                                    strHtml8 = '<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">对称:' + '</span>' + data.datas.order_goods[j].gia[key2] + '</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';
                                }

                                if (key2 == 'fluorescence') {
                                    strHtml9 = '<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">荧光:' + '</span>' + data.datas.order_goods[j].gia[key2] + '</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';
                                }

                                if (key2 == 'certtype') {
                                    strHtml10 = '<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">证书:' + '</span>' + data.datas.order_goods[j].gia[key2] + '</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';
                                }

                                if (key2 == 'certno') {
                                    strHtml11 = '<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">证书号:' + '</span>' + data.datas.order_goods[j].gia[key2] + '</div>';
                                }

                                if (key2 == 'price') {
                                    var strHtml12 = data.datas.order_goods[j].gia[key2];
                                }




                     }
                     erpHtml = '<div  class="ubi">' +strHtml1 + strHtml2 + strHtml3 + strHtml4 + strHtml5 + strHtml6 + strHtml7 + strHtml8 + strHtml9 + strHtml10 + strHtml11+'</div>';

                   }


               }










                 totalprice=totalprice+parseFloat(data.datas.order_goods[j].price);
                 changeprice = changeprice + parseFloat(data.datas.order_goods[j].changeprice);

                strHtml += erpHtml;
 strHtml += '</div>';
                strHtml += '</div>';
                strHtml += '</div>';
                strHtml += '</div>';
                ////strHtml += '</div>';
            //}else{
            //    //console.log('空产品');
           // }


           }



   strHtml += '</div><!--结束-->';




        //加载商品结束

    }

        strHtml += '<div class="ub ubb bc-border-b1" >';
        strHtml += '<div class="ub ub-f1  uinn btOrderdetail bc-text-c2" data-orderid="'+data.datas.id+'">  </div>';
        strHtml += '<div class="ub ub-f1 ub-pe uinn"> 共'+goodnum+'件商品 </div>';

        if (data.datas.addressid<1){
        strHtml += '<div class="ub ub-f1 ub-pe uinn bc-text-c2"><i class="ub ub-img" style="width:1.3em; height:1.3em; background-image:url(../static/images/iconprice.png)"></i>￥'+totalprice.toFixed(2)+'</div>';
        if (changeprice.toFixed(2)!='0.00'){
        strHtml += '<div class="ub  ub-pe uinn bc-text-c2"><i class="ub ub-img" style="width:1.3em; height:1.3em;  background-image:url(../static/images/pprice.png)"></i>￥' + changeprice.toFixed(2) + '</div>';
}
        }else{
        strHtml += '<div class="ub ub-f1 ub-pe uinn bc-text-c2"><i class="ub ub-img" style="width:1.3em; height:1.3em; background-image:url(../static/images/pprice.png)"></i>￥'+totalprice.toFixed(2)+'</div>';
        }


        strHtml += '</div>';
        strHtml += '<div class="ub">';
       // strHtml += '<div class="ub ub-f1 ub-pe uinn "></div>';

        strHtml += '<div class="ub ub-f1 ub-pe uinn ">';

        //strHtml += '<div class="ub uba uinn  ub-pc bc-border-b2 bc-bg-b2 bc-text-c5 btnDelProduct" data-id="" onclick="btEdit(\''+data.datas.addressid+'\',\''+data.datas.address_send+'\',\''+data.datas.mobile+'\',\''+data.datas.remark+'\',\''+data.datas.id+'\')" > 删除商品 </div>';

  if (data.datas.status!='3'&&data.datas.status!='-1'){

       if (!isDefine(data.datas.addresss)){
        strHtml += '<div class="ub uba uinn  ub-pc bc-border-b2 bc-bg-b2 bc-text-c5 btnFinish" data-id="" onclick="btEdit(\'0\',\''+data.datas.address_send+'\',\''+data.datas.mobile+'\',\''+data.datas.remark+'\',\''+data.datas.id+'\')" > 修改联系方式 </div>';
    }else{

           strHtml += '<div class="ub uba uinn  ub-pc bc-border-b2 bc-bg-b2 bc-text-c5 btnFinish" data-id="" onclick="btEdit(\'1\',\''+data.datas.addresss.realname+'\',\''+data.datas.addresss.mobile+'\',\''+data.datas.addresss.address+'\',\''+data.datas.id+'\')" > 修改联系方式 </div>';

    }
}

        strHtml += '</div>';



        strHtml += '</div>';
        strHtml += '</div>';








    $(".orderlist").html(strHtml);


     if (data.datas.status=='1'){
            orderstatus='订单等待发货';

            $('.orderstatus').html(orderstatus);

        }else if(data.datas.status=='2'){
            orderstatus='订单等待收货';

         // strHtml += '<div class="ub ub-f1 ub-pe uinn ">';
         // strHtml += '<div class="ub uba uinn  ub-pc bc-border-b2 bc-bg-b2 bc-text-c5 btnFinish" data-id="'+data.datas.id+'">确认收货</div>';
         // strHtml += '</div>';
         $('.orderstatus').html(orderstatus);

        }else if(data.datas.status=='3'){
            orderstatus='订单已完成';
            $('.orderstatus').html(orderstatus);
        }else if(data.datas.status=='4'){
            orderstatus='订单等待审核';
            $('.orderstatus').html(orderstatus);

         // strHtml += '<div class="ub ub-f1 ub-pe uinn ">';
         // strHtml += '<div class="ub uba uinn  ub-pc bc-border-b2 btnCancel"  data-id="'+data.datas.id+'">取消订单</div>';
         // strHtml += '</div>';

         // strHtml += '<div class="ub ub-f1 ub-pe uinn ">';
         // strHtml += '<div class="ub uba uinn  ub-pc bc-border-b2 bc-bg-b2 bc-text-c5 btnCheck"  data-id="'+data.datas.id+'">通过审核</div>';
         // strHtml += '</div>';

        }else if(data.datas.status=='5'){
            orderstatus='订单已审核';
            $('.orderstatus').html(orderstatus);
        }else if(data.datas.status=='-1'){
            orderstatus='订单已取消';
            $('.orderstatus').html(orderstatus);
        }else{
            orderstatus='';
        }


    if (!isDefine(data.datas.addresss)){
 $(".bossaddress").html('<div class="ub uinn ub-ver" style="border-bottom:1px #f0efef dashed;">'+
'                <div class="ub uinn-lr"><span class="bc-text-c2">联 系 人:</span>'+data.datas.address_send+'</div>'+
'                <div class="ub uinn-lr"><span class="bc-text-c2">联系电话:</span>'+data.datas.mobile+'</div>'+
'                <div class="ub uinn-lr"><span class="bc-text-c2">联系地址:</span>'+data.datas.remark+'</div>'+
'            </div>');







    }else{


      //boss_address(data.datas.addressid);

       $(".bossaddress").html('<div class="ub uinn ub-ver" style="border-bottom:1px #f0efef dashed;">'+
'                <div class="ub uinn-lr"><span class="bc-text-c2">联 系 人:</span>'+data.datas.addresss.realname+'</div>'+
'                <div class="ub uinn-lr"><span class="bc-text-c2">联系电话:</span>'+data.datas.addresss.mobile+'</div>'+
'                <div class="ub uinn-lr"><span class="bc-text-c2">联系地址:</span>'+data.datas.addresss.address+'</div>'+
'            </div>');




    }


    //init_data();
 //}






}

ini_data();


</script>

</html>
