<!doctype html>
<html>

<head>
    <title>确认订单</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 user-scalable=no">
    <meta name="format-detection" content="telephone=no" />
    <!-- bootstrap start -->
    <link rel="stylesheet" href="../static/css/bootstrap.min.css">
    <link rel="stylesheet" href="../static/css/bootstrap-theme.min.css">
    <script src="../static/js/jquery-3.0.0.js"></script>
    <script src="../static/js/bootstrap.min.js"></script>
    <!-- bootstrap end -->
    <script type="text/javascript" src="../static/js/config.js"></script>
    <script type="text/javascript" src="../static/js/function.js"></script>
    <script type="text/javascript" src="../static/js/androidJSInterface.js"></script>
    <script src="../static/js/touch.js"></script>
    <link rel="stylesheet" type="text/css" href="../static/css/ui-box.css">
    <link rel="stylesheet" type="text/css" href="../static/css/ui-base.css">
    <link rel="stylesheet" type="text/css" href="../static/css/ui-color.css">
    <link rel="stylesheet" type="text/css" href="../static/css/ui-control.css">
    <link rel="stylesheet" type="text/css" href="../static/css/ui-icon.css">
    <link rel="stylesheet" type="text/css" href="../static/css/ui-my.css">
</head>

<body class="um-vp" ontouchstart>
    <div id="page_1" class="up ub ub-ver" tabindex="0">
         <div class="ub ub-ver ">
             <div class="ub ub-pc ub-ac uinn  bc-bg-d3 bc-text-c5" style="height:2.8em;" >确认订单</div>
         </div>
         <div class="ub  ub-ver ub-fh ub-f1 " style="overflow:auto" id="cartBox">
            <div class="">
              <!-- 收货地址列表 -->
                  <div class="ub  umar-l umar-r ubb  bc-border-c4">
                      <div class="ub ub-ver ub-f1 uinn">
                            <div class="ub bc-text-c7"><span class="bc-text-c6 ubi umw5">收货人:</span><span class="consignee">罗小姐</span></div>
                            <div class="ub bc-text-c7"><span class="bc-text-c6 ubi umw5">联系电话:</span><span class="tel">13133335555</span></div>
                            <div class="ub ut-s bc-text-c7"><span class="bc-text-c6 ubi umw5">联系地址:</span><span class="caddress">北京市测试</span></div>     
                      </div>
                  </div>
             <!-- 收货地址列表 -->
             <!-- 订单详情 -->
                  <div class="ub uinn ubb bc-border-c4">
                      <div class="ub ub-pc ub-ac " style="width:1.5em; ">
                          <input type="checkbox" name="" class="selects" data-cartid="3512" data-price="3168.00">
                      </div>   
                      <div class="ub ub-ac ub-pc">
                          <div class="ub ub-img uba bc-border-c4" style="width:4em;height:4em; background-image: url(http://www.zsmtvip.com/attachment/images/2/2016/12/zc4K8k0MJ5v7vIjJp7Mj5ViGJjjuuL.jpg); ">
                          </div>
                      </div>
                      <div class="ub ub-f1 ub-ver">
                          <div class="ub umar-l ">
                              <div class="ub ub-f1 size12">
                                  <div class="ubi ufl size10 bc-text-c2" style="margin:0 0.1em">货号:</div> 
                                  <div class="ubi ufl size10 bc-text-c2">00280792</div>
                              </div>
                              <div class="ub  bc-text-c2">
                                  <i class="ub ub-img" style="width:1.2em; height:1.2em;"></i>￥<span class="pricelist">3168.00</span>
                              </div>
                          </div>
                          <div class="ub umar-l  umar-b  " style="padding-bottom:.5em; border-bottom:1px #a9a9a9 dashed">
                          </div>
                          <div class="umar-l  bc-text-c2">
                              <div class="ubi ufl size10 bc-text-c2" style="margin:0 0.1em">形状:</div> 
                              <div class="ubi ufl size10 bc-text-c2">圆形</div>
                              <div class="ubi ufl size10 bc-text-c2" style="margin:0 0.4em"> | </div>
                              <div class="ubi ufl size10 bc-text-c2" style="margin:0 0.1em">金重:</div> 
                              <div class="ubi ufl size10 bc-text-c2">2.41g</div>
                              <div class="ubi ufl size10 bc-text-c2" style="margin:0 0.4em"> | </div>
                              <div class="ubi ufl size10 bc-text-c2" style="margin:0 0.1em">材质:</div> 
                              <div class="ubi ufl size10 bc-text-c2">Pt950</div>
                              <div class="ubi ufl size10 bc-text-c2" style="margin:0 0.4em"> | </div>
                              <div class="ubi ufl size10 bc-text-c2" style="margin:0 0.1em">主石</div> 
                              <div class="ubi ufl size10 bc-text-c2">0.115ct/1</div>
                              <div class="ubi ufl size10 bc-text-c2" style="margin:0 0.4em"> | </div>
                              <div class="ubi ufl size10 bc-text-c2" style="margin:0 0.1em">净度:</div> 
                              <div class="ubi ufl size10 bc-text-c2">SI</div>
                              <div class="ubi ufl size10 bc-text-c2" style="margin:0 0.4em"> | </div>
                              <div class="ubi ufl size10 bc-text-c2" style="margin:0 0.1em">颜色:</div> 
                              <div class="ubi ufl size10 bc-text-c2">F-G</div>
                              <div class="ubi ufl size10 bc-text-c2" style="margin:0 0.4em"> | </div>
                          </div>
                      </div>
                  </div>
            </div>
         </div>
        <div class="ub ">
            <div class="ub ub-f1 uinn  bc-bg-c4 ">
              <div class="ub ub-f1  ub-ac ub-pc umar-t umar-b">
                   <input type="checkbox" name="" id="selectAll">全选
              </div>          
              <div class="ub ub-f1  ub-ac ub-pc umar-t umar-b totalmoney size12">合计:￥0.00</div>
            </div>
            <div class="ub ub-f1 uinn bc-bg-d3 ub-ac ub-pc bc-text-c5 ">
              <div class="ub ub-f1  ub-ac ub-pc umar-t umar-b btPostOrder sc-text-active" onclick="jion()"> 
                 提交订单
               </div>
               <div class="ub ub-f1  ub-ac ub-pc umar-t umar-b  btcartdel  sc-text-active uhide" > 
                   删除商品
               </div>
            </div>
        </div>  
         <!-- 提交弹框-->
          <div class="modal fade" id="btlist2" style="top:-10%">
                <div class="ub ub-con ub-pc ub-ac">
                    <div class="ub uc-a1 bc-bg ub-ver" style="width: 90%; height:auto">
                        <div class="ub ub-pe uinn umar">
                             <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="color:#ec3a49;width: 0.8em; height: 0.8em"><span aria-hidden="true">&times;</span></button>
                        </div>
                        <div style=" margin:  4em 4em 1em 4em">
                            <div style="margin-bottom:2em;" class="ub ub-pc">
                                <div class="ub uc-a1 bc-bg-d3  ub-ac ub-pc ulev1 uinn bc-text-head ub-f1 umar-a" data-dismiss="modal" onclick="" style="width:8em;">成功提交订单</div>
                                <div class="ub uc-a1 bc-bg-d3  ub-ac ub-pc ulev1 uinn bc-text-head ub-f1 umar-a" data-dismiss="modal" style="width:8em;">朕知道</div>
                            </div>
                        </div>     
                    </div>
                </div>  
          </div>
    </div>      
</body>
<script>
// 新建弹框功能
  function jion(){
    $('#btlist2').modal();
  }
var totalmoney=0;
var cartids='';
function deleteShoppingCart() {
    var key = getKey();
    console.log(appUrl + '/app/index.php?i=2&c=entry&m=ewei_shop&v=pad&do=member&p=member_cart&key='+key+'&act=del&id='+cartids+'&js='+Math.random());
    $.ajax({
        url : appUrl + '/app/index.php?i=2&c=entry&m=ewei_shop&v=pad&do=member&p=member_cart&key='+key+'&act=del&id='+cartids+'&js='+Math.random(), 
        type: "post", 
        timeout:10000,                     
        dataType : 'jsonp',
        beforeSend: function () {
             },
            success : function(data) {                                              
                    date_ajax(appUrl + '/app/index.php?i=2&c=entry&m=ewei_shop&v=pad&do=member&p=member_cart&key='+key);
            },
            error : function(data2) {
                    date_ajax(appUrl + '/app/index.php?i=2&c=entry&m=ewei_shop&v=pad&do=member&p=member_cart&key='+key);
            }
    })
}
// function date_ajax(url) {
//     //console.log(url);
//     $.ajax({
//         url: url,
//         type: "get",
//         dataType: 'jsonp',
//         success: function(data) {
//             if (data.resultCode == "0") {
//                 show_list(data);
//             } else {
//                 //showToast(data.error);
//                  $("#cartBox").html('<div class="ub ub-pc ub-ac" style="text-align:center; margin-top:40%;"><img src="../static/images/empty.jpg" style="display:block;width:90%"></div>');
//                  $(".totalmoney").html('合计:￥0.00');

//             }
//         },
//         error: function() {
//             ////showToast("error!");
//         }
//     })
// }
function show_list(data) {
    //console.log(JSON.stringify(data));
    var strHtml = "";
    //console.log(data.datas.list.length);
    for (var i = 0; i < data.datas.list.length; i++) {
        //console.log(data.datas.list[i].gia);
        //GIA
        if (isDefine(data.datas.list[i].gia)){

         for(var key in data.datas.list[i].gia){

                if (key=='sn') {
                  strHtml1='<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">货号:'+'</span>'+data.datas.list[i].gia[key]+'</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';
                }
                
                if (key=='style') {strHtml2='<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">形状:'+'</span>'+data.datas.list[i].gia[key]+'</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';}

                if (key=='weight') {strHtml3='<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">重量:'+'</span>'+data.datas.list[i].gia[key]+'</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';}

                if (key=='color') {strHtml4='<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">颜色:'+'</span>'+data.datas.list[i].gia[key]+'</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';}

                if (key=='clarity') {strHtml5='<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">净度:'+'</span>'+data.datas.list[i].gia[key]+'</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';}

                if (key=='cut') {strHtml6='<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">切工:'+'</span>'+data.datas.list[i].gia[key]+'</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';}

                if (key=='polish') {strHtml7='<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">抛光:'+'</span>'+data.datas.list[i].gia[key]+'</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';}

                if (key=='symmetry') {strHtml8='<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">对称:'+'</span>'+data.datas.list[i].gia[key]+'</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';}

                if (key=='fluorescence') {strHtml9='<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">荧光:'+'</span>'+data.datas.list[i].gia[key]+'</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';}

                if (key=='certtype') {strHtml10='<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">证书:'+'</span>'+data.datas.list[i].gia[key]+'</div><div class="ub ufl size10 bc-text-c2" style="margin:0 0.4em">|</div>';}

                if (key=='certno') {strHtml11='<div class="ub ufl size10 bc-text-c2"><span class="bc-text-c2">证书号:'+'</span>'+data.datas.list[i].gia[key]+'</div>';}

                if (key=='price') {strHtml12=data.datas.list[i].gia[key];}
             }
            strHtml += '<div class="ub uinn ubb bc-border-c4">';
            strHtml += '<div class="ub ub-pc ub-ac" style="width:1.5em; ">';
            strHtml += '<input type="checkbox" name="" class="selects" data-cartid="'+data.datas.list[i].id+'" data-price="'+strHtml12+'"  >';
            strHtml += '</div>';
            strHtml += '<div class="ub ub-ac ub-pc" ><div class="ub ub-img uba bc-border-c4" style="width:4em;height:4em; background-image: url(../static/images/diamond.png);"></div></div>';
            strHtml += '<div class="ub ub-f1 ub-ver">';
            strHtml += '<div class="ub umar-l " style="padding-bottom:.5em; border-bottom:1px #a9a9a9 dashed">';
            strHtml += '<div class="ubi ub-f1  size12">裸钻</div>';
            strHtml += '<div class="ub  bc-text-c2"><i class="ub ub-img" style="width:1.2em; height:1.2em;"></i>￥<span class="pricelist">'+strHtml12+'</span></div>';
            strHtml += '</div>';
            strHtml += '<div class="umar-l umar-t  bc-text-c2">                                        ';
            strHtml =strHtml+strHtml1+strHtml2+strHtml3+strHtml4+strHtml5+strHtml6+strHtml7+strHtml8+strHtml9+strHtml10+strHtml11;
            strHtml += '</div>';
            strHtml += '</div>';
            strHtml += '</div>';
       }else{
            strHtml +='<div class="ub uinn ubb bc-border-c4">';
            strHtml +='<div class="ub ub-pc ub-ac " style="width:1.5em; ">';
            strHtml +='<input type="checkbox" name=""  class="selects" data-cartid="'+data.datas.list[i].id+'" data-price="'+data.datas.list[i].marketprice+'" >';
            strHtml +='</div>   ';
            strHtml +='<div class="ub ub-ac ub-pc" ><div class="ub ub-img uba bc-border-c4" style="width:4em;height:4em; background-image: url('+data.datas.list[i].goods.thumb.url+'); "></div></div>';
            strHtml +='<div class="ub ub-f1 ub-ver">';
            strHtml +='<div class="ub umar-l ">';
            strHtml +='<div class="ub ub-f1 size12">'+data.datas.list[i].goods.title+'</div>';
            strHtml +='<div class="ub  bc-text-c2"><i class="ub ub-img" style="width:1.2em; height:1.2em;"></i>￥<span class="pricelist">'+data.datas.list[i].marketprice+'</span></div>';
            strHtml +='</div>';
            strHtml +='<div class="ub umar-l  umar-b  " style="padding-bottom:.5em; border-bottom:1px #a9a9a9 dashed">';
            strHtml +='<div class="ub ub-f1">';
            strHtml +='<div class="ub bc-text-c2">';
            strHtml +='<span class="bc-text-c1 size12">手寸:</span><span class="size12">'+data.datas.list[i].size+'</span> ';
            strHtml +='<span class="bc-text-c1 size12">数量:</span><span class="size12">X'+data.datas.list[i].total+'</span>';
            strHtml +='</div>';
            strHtml +='</div>';
            strHtml +='<div class="ub bc-text-a2 btEdit "   data-cartid="'+data.datas.list[i].id+'" data-size="'+data.datas.list[i].size+'" data-total="'+data.datas.list[i].total+'"><i class="ub ub-img" style="width:1.2em; height:1.2em; "></i>编辑</div>';
            strHtml +='</div>';
            strHtml +='<div class="umar-l  bc-text-c2">';
            //strHtml +='<div class="ub ufl">HDC554587</div>';
            //strHtml +='<div class="ub ufl" style="margin:0 0.4em">|</div>';
            var erpHtml='';
             if (isDefine(data.datas.list[i].erp)){

                                 if (isDefine(data.datas.list[i].erp.erpid)&data.datas.list[i].erp.erpid!=''){
                                     erpHtml += '<div class="ubi ufl size10 bc-text-c2" style="margin:0 0.1em">货号:</div> <div class="ubi ufl size10 bc-text-c2">' + data.datas.list[i].erp.erpid + '</div><div class="ubi ufl size10 bc-text-c2" style="margin:0 0.4em"> | </div>';
                                  }

                                  if (isDefine(data.datas.list[i].erp.p1)&data.datas.list[i].erp.p1!=''){
                                     erpHtml += '<div class="ubi ufl size10 bc-text-c2" style="margin:0 0.1em">金重:</div> <div class="ubi ufl size10 bc-text-c2">' + data.datas.list[i].erp.p1 + '</div><div class="ubi ufl size10 bc-text-c2" style="margin:0 0.4em"> | </div>';
                                  }

                                  if (isDefine(data.datas.list[i].erp.p4)&data.datas.list[i].erp.p4!=''){
                                     erpHtml += '<div class="ubi ufl size10 bc-text-c2" style="margin:0 0.1em">材质:</div> <div class="ubi ufl size10 bc-text-c2">' + data.datas.list[i].erp.p4 + '</div><div class="ubi ufl size10 bc-text-c2" style="margin:0 0.4em"> | </div>';
                                  }

                                  if (isDefine(data.datas.list[i].erp.p7)&data.datas.list[i].erp.p7!=''){
                                     erpHtml += '<div class="ubi ufl size10 bc-text-c2" style="margin:0 0.1em">副石:</div> <div class="ubi ufl size10 bc-text-c2">' + data.datas.list[i].erp.p7 + '</div><div class="ubi ufl size10 bc-text-c2" style="margin:0 0.4em"> | </div>';
                                  }

                                  if (isDefine(data.datas.list[i].erp.p6)&data.datas.list[i].erp.p6!=''){
                                     erpHtml += '<div class="ubi ufl size10 bc-text-c2" style="margin:0 0.1em">主石</div> <div class="ubi ufl size10 bc-text-c2">' + data.datas.list[i].erp.p6 + '</div><div class="ubi ufl size10 bc-text-c2" style="margin:0 0.4em"> | </div>';
                                  }

                                   if (isDefine(data.datas.list[i].erp.p8)&data.datas.list[i].erp.p8!=''){
                                     erpHtml += '<div class="ubi ufl size10 bc-text-c2" style="margin:0 0.1em">形状:</div> <div class="ubi ufl size10 bc-text-c2">' + data.datas.list[i].erp.p8 + '</div><div class="ubi ufl size10 bc-text-c2" style="margin:0 0.4em"> | </div>';
                                  }

                                  if (isDefine(data.datas.list[i].erp.p2)&data.datas.list[i].erp.p2!=''){
                                     erpHtml += '<div class="ubi ufl size10 bc-text-c2" style="margin:0 0.1em">净度:</div> <div class="ubi ufl size10 bc-text-c2">' + data.datas.list[i].erp.p2 + '</div><div class="ubi ufl size10 bc-text-c2" style="margin:0 0.4em"> | </div>';
                                  }

                                  if (isDefine(data.datas.list[i].erp.p3)&data.datas.list[i].erp.p3!=''){
                                     erpHtml += '<div class="ubi ufl size10 bc-text-c2" style="margin:0 0.1em">颜色:</div> <div class="ubi ufl size10 bc-text-c2">' + data.datas.list[i].erp.p3.replace('<','&lt;') + '</div><div class="ubi ufl size10 bc-text-c2" style="margin:0 0.4em"> | </div>';
                                  }
                                }
            strHtml +=erpHtml;
            strHtml +='</div>';
            strHtml +='</div>';
            strHtml +='</div>';
            strHtml +='</div>';        
       }
    }

    //////console.log(strHtml);
    $("#cartBox").html(strHtml);
    init_data();   
}

//加载购物车
var key = getKey();
date_ajax(appUrl + '/app/index.php?i=2&c=entry&m=ewei_shop&v=pad&do=member&p=member_cart&psize=9999&key='+key);
function load_cart(){
  console.log(appUrl + '/app/index.php?i=2&c=entry&m=ewei_shop&v=pad&do=member&p=member_cart&key='+key);
  date_ajax(appUrl + '/app/index.php?i=2&c=entry&m=ewei_shop&v=pad&do=member&p=member_cart&psize=9999&key='+key);
}
//全选
$('#selectAll').on('change', function(evt) {
      if (this.checked){
            alert('1');
            $('.selects').each(function() {

                if (!$(this).is(":checked")) {
                    $(this).prop('checked', true);


                }
            })
        }else{

            $('.selects').each(function() {
                if ($(this).is(":checked")) {
                    $(this).prop('checked', false);
                }
            })
        }
        add_price(); 
    });
function init_data(){
   add_price(); 

$('.selects').each(function() {

    $(this).on('change', function(evt) { add_price(); })

})


//$('.btEdit').each(function() {

    touch.on('.btEdit', 'tap', function(ev) { 
         var size=$(this).data("size");
         var cartid=$(this).data("cartid");
         //alert(goodssize);
         $('.op_num1').html(size);
         $('.op_num1').data("size",size);
         $('.op_num1').data("cartid",cartid);
         $('#myedit-box').modal();


    })

//})

    touch.on('.btcartdel', 'click', function(ev) {
          deleteShoppingCart();
      })


}


        $('.op_num1_left').each(function() {
            $(this).on('click', function(evt) {
                var cartid = $('.op_num1').data("cartid");
                op_goods('sub', 'size', cartid);

            });
        })


        $('.op_num1_right').each(function() {
            $(this).on('click', function(evt) {
                var cartid = $('.op_num1').data("cartid");
                op_goods('add', 'size', cartid);
            });
        })

function op_goods(op, type, cartid) {
          var cur_size=$('.op_num1').data("size");
            //var cur_num = $("#tr_" + goodid).data("goodnum");
              var cur_num =1;
                if (op == 'sub') {
                    if (type == 'size') {
                        if (parseInt(cur_size)>1){
                            cur_size = parseInt(cur_size) - 1;
                            good_ajax(cartid, cur_size, cur_num)
                        }

                    } else {
                        if (parseInt(cur_num)>1){
                            cur_num = parseInt(cur_num) - 1;
                            good_ajax(cartid, cur_size, cur_num)
                        }
                    }

                } else {

                  
                    if (type == 'size') {
                            cur_size = parseInt(cur_size) + 1;
                            good_ajax(cartid, cur_size, cur_num)
                        

                    } else {
                        
                            cur_num = parseInt(cur_num) + 1;
                            good_ajax(cartid, cur_size, cur_num)
                       

                    }

                }
            }

function good_ajax(cartid, cur_size, cur_num) {

    console.log(appUrl + '/app/index.php?i=2&c=entry&m=ewei_shop&v=pad&do=member&p=member_cart&act=edit&icz=' + cartid + '|' + cur_num + '|' + cur_size + '&key=' + key);
    $.ajax({
        url: appUrl + '/app/index.php?i=2&c=entry&m=ewei_shop&v=pad&do=member&p=member_cart&act=edit&icz=' + cartid + '|' + cur_num + '|' + cur_size + '&key=' + key,
        type: "get",
        dataType: 'jsonp',
        success: function(data) {

            if (data.resultCode == "0") {

                
                $('.op_num1').data("size", cur_size);
                 $('.op_num1').html(cur_size);
                

            } else {
                showToast(data.error);
            }
        },
        error: function() {
            //showToast("error!");
        }
    })

}

function add_price(){
     var totalmoney=0;
     cartids='';
     $('.selects').each(function() {

                
                if ($(this).is(":checked")) {
                   // alert($(this).data("price"));
                   
                     if (cartids==''){
                        cartids=$(this).data("cartid");
                     }else{
                        cartids +=','+$(this).data("cartid"); 
                     } 

                   totalmoney=parseFloat(totalmoney)+parseFloat($(this).data("price"));


                   //alert(totalmoney);
                }



            })

        $(".totalmoney").html('合计:￥'+totalmoney.toFixed(2));

        console.log(cartids);
}

 



touch.on('.btPostOrder', 'tap', function(ev) {

    // 弹出提交确认ok框
    $('#btlist').modal();

    var key = getKey();
    var orderparam='';
    var orderid='';
    $('.selects').each(function() {
                if ($(this).is(":checked")) {
                   // alert($(this).data("price"));
                   if (orderparam==''){
                     orderid=$(this).data("cartid");
                     orderparam=$(this).data("cartid")+"|1";
                    }else{
                        orderparam=orderparam+','+$(this).data("cartid")+"|1";
                        orderid=orderid+','+$(this).data("cartid");
                    }
                   console.log(totalmoney);
                }
     })

    if (orderparam==''){

      showToast("请选择商品"); 
      return false;
    }
   //console.log(appUrl + '/addons/ewei_shop/template/app/default/shop/orderconfirm.html?orderid='+orderid+'&orderparam='+orderparam+'&else='+encodeURI($(".totalmoney").html()));

    openWindow(5, '确认订单', appUrl + '/addons/ewei_shop/template/app/default/shop/orderconfirm.html?orderid='
                        +orderid+'&orderparam='+orderparam+'&else'+encodeURI($(".totalmoney").html()),
                        'shop,orderconfirm.html?orderid='
                        +orderid+'&orderparam='+orderparam+'&else'+encodeURI($(".totalmoney").html()));

    })
</script>

</html>